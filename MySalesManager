import java.util.ArrayList;
import java.util.List;
import java.time.LocalDate;
import java.time.LocalTime;

public class SalesManager {

    private List<SalesRecord> salesList;  // List to store all the sales records
    private Inventory inventory;  // Inventory object to track stock levels

    // Constructor to initialize the sales list and inventory
    public SalesManager(Inventory inventory) {
        this.salesList = new ArrayList<>();
        this.inventory = inventory;
    }

    //This method will log a sale and update inventory
    public void logSale(String custName, String salesperson, String productName, 
                        LocalDate dateOfSales, LocalTime timeOfOrder, int amtSold, 
                        double discount, double totalSales) {
        //Checks to see if enough stock is available
        if (inventory.reduceStock(productName, amtSold)) {
            //Creates a new SalesRecord object based on provided data
            SalesRecord sale = new SalesRecord(custName, salesperson, productName, 
                                               dateOfSales, timeOfOrder, amtSold, discount, totalSales);
            //This will add the new sale to the salesList
            salesList.add(sale);
            System.out.println("This sale was logged successfully! Product ID: " + sale.getProductId());
        } else {
            System.out.println("Error: Low stock for product: " + productName);
        }
    }

    //This method will get a list of all sales
    public List<SalesRecord> getAllSales() {
        return salesList;
    }

    //This method will print all sales records
    public void printAllSales() {
        for (SalesRecord sale : salesList) {
            System.out.println("Sale ID: " + sale.getProductId() + ", Customer: " + sale.getCustName() +
                               ", Product: " + sale.getProductName() + ", Date: " + sale.getDateOfSales() +
                               ", Amount Sold: " + sale.getAmtSold() + ", Total Sales: " + sale.getTotalSales());
        }
    }

    //This method will print the inventory
    public void printInventory() {
        inventory.printInventory();
    }
}
